# Carbon Amber ADL â€” Improvement Plan for 24 February 2026

**Date:** 2026-02-24

### Status Legend

| Icon | Status | Meaning |
|------|--------|--------|
| ğŸ†• | New | Not yet started |
| ğŸ”„ | In Progress | Work underway |
| âœ… | Done | Completed |

---

## Status of Previous Plans

| Phase | Item | Status | Blocker |
|-------|------|--------|---------|
| Phase 1 | Test single-task execution pipeline | âŒ Not done | Requires live n8n environment |
| Phase 4 | Multi-task workflow testing | âŒ Not done | Requires live n8n environment |
| Phase 4 | Ref resolution validation | âŒ Not done | Requires live n8n environment |
| Future | `learning.md` placeholder | âŒ Deferred | Not yet designed |

---

## What Can Be Done Today

### ğŸ”´ Priority 1: Action Agent Messaging Non-Compliance âœ… Done
The Action Agent executing in n8n does not conform to the ADL `message_format.md` specification.

#### 1.1 âœ… Standardize Action Agent JSON Output
- **Problem:** Log `20260224-1.md` reveals `action_agent` output is completely non-compliant. It lacks `message_id`, `next_agent`, `status`, `error`, `metadata`, `resources`, and `audit` blocks. It also places the payload inside `output.content.response_text` instead of formatting standard refs.
- **Action:** Update/verify `agent/executional/action.md` to aggressively enforce `message_format.md` structure. Note: If the agent logic in `action.md` is already correct, this indicates the n8n layer is using legacy prompts or intercepting/formatting the response incorrectly.
- **Effort:** ~30 mins

#### 1.2 âœ… Action Agent Capability Routing Fix
- **Problem:** The Action Agent successfully downloaded the video but hallucinated a response about being unable to fetch metadata. The Planning Agent correctly split the download (task 2) and metadata extraction (task 4), but the Action Agent (or n8n) seems to have attempted both at once using a generic tool and failed.
- **Action:** Review `action.md` to ensure it strictly executes *only* the single `task_id` passed by the Dispatch Agent. 
- **Effort:** ~15 mins

### ğŸŸ¡ Priority 2: Cross-Reference Report Resolution âœ… Done
#### 2.1 âœ… Document Schema Loading (Finding C2)
- **Problem:** The cross-reference report flagged that `instructions.md` mentions `message_schema.json` but doesn't explain how or when it's loaded.
- **Action:** Update `instructions.md` to clarify that `message_schema.json` is used for validation during the development/testing phase, or explain its orchestration layer usage.
- **Effort:** ~10 mins

### ğŸŸ¢ Priority 3: Learning Agent Design âœ… Done
#### 3.1 âœ… Design `learning.md`
- **Problem:** The Learning Agent is the final operational core agent not yet implemented.
- **Action:** Outline the responsibilities, triggers, and capabilities of the Learning Agent (e.g., updating user preferences, identifying workflow inefficiencies).
- **Effort:** ~45 mins

### ğŸŸ¢ Priority 4: Dispatch Agent Implementation Note âœ… Done
#### 4.1 âœ… Document Dispatch Agent as n8n workflow
- **Problem:** Mismatch between LLM agent prompt format and the actual implementation of the Dispatch Agent as an n8n workflow.
- **Action:** Add an explicit "Architectural Implementation Note" to `dispatch.md` to formally document the design decision.
- **Effort:** ~10 mins

### ğŸŸ¢ Priority 5: Cross-Reference Report Mopping Up âœ… Done
#### 5.1 âœ… Fix `audit.md` log file extension (Finding D4)
- **Problem:** `audit.md` specified `.log` files, but the system actually generates `.md` files (e.g., `20260224-1.md`).
- **Action:** Update `audit.md` to explicitly define the `YYYYMMDD-N.md` naming convention.
- **Effort:** ~5 mins

#### 5.2 âœ… Reconcile `parent_message_id` constraint (Finding D6)
- **Problem:** `planning.md` required a specific deterministic ID structure that wasn't expected or used by downstream agents.
- **Action:** Remove the strict format constraint from `planning.md` so it naturally accepts the orchestrator's IDs.
- **Effort:** ~5 mins

### ğŸŸ¢ Priority 7: Fix Mid-Day Cross-Reference Discrepancies âœ… Done
#### 7.1 âœ… Update `message_schema.json` workflow schema
- **Problem:** The schema strictly enforces obsolete validation logic for the `content` payload (lines 125-196) tailored to an older version of the Planning Agent.
- **Action:** Remove the heavily nested and outdated `tasks` array and `execution_groups` object definitions, simplifying the `content` block so it flexibly accepts the modern `workflow` object payload defined in `planning.md`.
- **Effort:** ~15 mins

#### 7.2 âœ… Remove deprecated agents from `README.md`
- **Problem:** `README.md` lines 279-282 still list the deprecated `perception.md` and `interpretation.md` as active agents in the Executional Core.
- **Action:** Update the Executional Core section of `README.md` to solely feature `action.md` as the unified tool-calling interface.
- **Effort:** ~5 mins
