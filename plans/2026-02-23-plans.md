# Carbon Amber ADL ‚Äî Improvement Plan for 23 February 2026

**Date:** 2026-02-23
**Prepared by:** Antigravity (AI Assistant)

---

## Status of Previous Plans

### From `carbon-amber-adl Development.md` (Feb 21)

| Phase | Item | Status |
|-------|------|--------|
| Phase 1 | Implement `dispatch_agent` | ‚úÖ Done (`dispatch.md` v1.0.0) |
| Phase 1 | Create unified action agent (was `execution_agent`) | ‚úÖ Done (`action.md` v1.0.0, renamed Feb 23) |
| Phase 1 | Test single-task execution pipeline | ‚ùå Not yet tested |
| Phase 2 | Dispatch failure handling and retry logic | ‚úÖ Included in `dispatch.md` |
| Phase 2 | Parallel execution group coordination | ‚úÖ Included in `dispatch.md` |
| Phase 2 | Workflow state tracking | ‚úÖ Included in `dispatch.md` |
| Phase 3 | Reposition reasoning_agent for synthesis | ‚úÖ Done (`reasoning.md` v1.0.0) |
| Phase 3 | Deprecate perception_agent and action_agent placeholders | ‚ùå Placeholder files still exist |
| Phase 3 | Retire interpretation_agent | ‚ùå Placeholder file still exists |
| Phase 4 | Multi-task workflow testing | ‚ùå Not yet done |
| Phase 4 | Ref resolution validation | ‚ùå Not yet done |

---

## What Can Be Done Today

The following items are grouped by priority and ordered by dependency. Each item can be completed in a single working session.

---

### üî¥ Priority 1: HIGH Severity Fixes (from Cross-Reference Report)

These resolve contradictions and broken references that would cause runtime failures or incorrect LLM behaviour.

#### 1.1 Fix memory agent ID mismatch (Finding A1)
- **Problem:** `memory.md` defines `agent.name` as `"agent_memory"` but `dispatch.md` routes to `"memory_agent"`
- **Action:** Update `memory.md` to use `"memory_agent"` consistently (aligns with all other agent naming: `objective_agent`, `goal_agent`, etc.)
- **Files:** `agent/operational/memory.md`
- **Effort:** ~5 minutes

#### 1.2 Overhaul `memory.md` output example (Findings D3, D5)
- **Problem:** Output example uses flat field format (`"agent": "agent_memory"`, `"status": "success"`) instead of the nested object structure required by `message_format.md`. Also uses stale 2025 dates.
- **Action:** Rewrite the output example to use nested format (`agent: {name, type}`, `status: {code, message}`), update timestamps to 2026, and include `resources` field
- **Files:** `agent/operational/memory.md`
- **Effort:** ~15 minutes

#### 1.3 Remove "Reviewer Agent" references (Finding A4)
- **Problem:** `memory.md` references a "Reviewer Agent" that doesn't exist in the architecture
- **Action:** Remove/replace all references to "Reviewer Agent" with appropriate alternatives (e.g., quality benchmarks derived from audit data rather than a separate agent)
- **Files:** `agent/operational/memory.md`
- **Effort:** ~10 minutes

#### 1.4 Update `message_format.md` examples (Findings D1, D2)
- **Problem:** Example 1 Objective Agent output is missing URL annotations on `src_N`. Example 2 Goal Agent output is missing mandatory language detection goal before transcription.
- **Action:** Update both examples to conform to current `objective.md` v1.4.0 and `goal.md` v1.7.0 rules
- **Files:** `context/governance/message_format.md`
- **Effort:** ~20 minutes

#### 1.5 Add CAP-AUD-R to Agent Chain Flow (Finding C1)
- **Problem:** Agent Chain Flow in `message_format.md` lists Action Agent capabilities but omits `CAP-AUD-R` (audience analysis)
- **Action:** Add `CAP-AUD-R` to the capability list at steps [4]‚Äì[5]
- **Files:** `context/governance/message_format.md`
- **Effort:** ~5 minutes

#### 1.6 Update `message_schema.json` to catch up with `message_format.md` (Findings E1, B1)
- **Problem:** Schema is at v1.2.0 (Feb 19) while spec is at v1.6.0 (Feb 20). Any fields or constraints added since v1.2.0 are not enforced.
- **Action:** Audit changes from v1.3.0‚Äìv1.6.0 in `message_format.md` changelog and update the JSON schema accordingly
- **Files:** `schema/message_schema.json`, reference `context/governance/message_format.md`
- **Effort:** ~30 minutes

---

### üü° Priority 2: MEDIUM Severity Fixes

These address staleness, naming inconsistencies, and documentation gaps.

#### 2.1 Delete deprecated placeholder files (Finding B3)
- **Problem:** `perception.md` and `interpretation.md` (both v0.1.0, Feb 9) are stale placeholders superseded by the new `action.md` and `reasoning.md`
- **Action:** `git rm` both files. They serve no purpose and may confuse LLMs or developers.
- **Files:** `agent/executional/perception.md`, `agent/executional/interpretation.md`
- **Effort:** ~2 minutes

#### 2.2 Update `instructions.md` (Finding B2)
- **Problem:** `instructions.md` v2.0.0 (Feb 10) predates the Dispatch Agent, Reasoning Agent, and Action Agent (all Feb 21). The prompt assembly contract doesn't mention these newer agents.
- **Action:** Update the valid agent file list in Step 2 to include `dispatch.md`, `reasoning.md`, the renamed `action.md`, and note the removal of `perception.md`/`interpretation.md`
- **Files:** `context/instructions.md`
- **Effort:** ~10 minutes

#### 2.3 Standardise CAP-AUD-R identifier format (Finding A2)
- **Problem:** Inconsistent format ‚Äî `application.md` uses `CAP-AUD-R001`, `goal.md` uses `CAP-AUD-Rxxx`, `dispatch.md` uses `CAP-AUD-R*`
- **Action:** Standardise on `CAP-AUD-R001` format (matches existing capability ID pattern) across all files
- **Files:** `context/application.md`, `agent/governance/goal.md`, `agent/operational/dispatch.md`, `agent/operational/planning.md`
- **Effort:** ~10 minutes

#### 2.4 Fix `memory.md` orchestration naming (Finding A3)
- **Problem:** `memory.md` references "ARL" while other files use "n8n"
- **Action:** Replace all "ARL" references with "n8n" or "orchestration layer" for consistency
- **Files:** `agent/operational/memory.md`
- **Effort:** ~5 minutes

#### 2.5 Fix `memory.md` log path convention (Finding D4)
- **Problem:** `memory.md` references `system/logs/txn_20250601_001.jsonl` (transaction-based JSONL) but `audit.md` specifies `system/logs/YYYYMMDD.md` (date-based markdown)
- **Action:** Update `memory.md` examples to use the correct date-based path convention
- **Files:** `agent/operational/memory.md`
- **Effort:** ~5 minutes

#### 2.6 Update `application_template.md` (Finding B5)
- **Problem:** Template v1.0.0 (Feb 9) is outdated: missing Planning Agent, Dispatch Agent, and uses old agent names
- **Action:** Update template to reflect current architecture (all 7 active agents, correct naming)
- **Files:** `template/application_template.md`
- **Effort:** ~20 minutes

#### 2.7 Add schema validation for capability IDs and DAG structure (Findings E4, E5, E6)
- **Problem:** `message_schema.json` doesn't validate CAP-ID format or DAG task structure
- **Action:** Add pattern validation for capability IDs (`CAP-[A-Z]{3}-[A-Z]?\\d{3}`) and optional DAG task schema
- **Files:** `schema/message_schema.json`
- **Effort:** ~20 minutes

---

### üü¢ Priority 3: Cleanup and Documentation

#### 3.1 Fix `goal.md` Common Mistakes numbering (Finding A5)
- **Problem:** Numbering is non-sequential (1‚Äì6, jumps to 10, 11, back to 7, 8, 9, then 12, 13)
- **Action:** Renumber sequentially
- **Files:** `agent/governance/goal.md`
- **Effort:** ~5 minutes

#### 3.2 Document or remove `memory.md` undefined concepts (Finding C3)
- **Problem:** `memory.md` references "circuit breaker", "10-hop limit", and "SLM to LLM escalation" not defined elsewhere
- **Action:** Either add definitions to a shared glossary section in `application.md` or `README.md`, or remove if obsolete
- **Files:** `agent/operational/memory.md`, potentially `README.md`
- **Effort:** ~10 minutes

#### 3.3 Update `README.md` Version History
- **Problem:** Version history ends at v2.3.0 (Feb 20) and doesn't reflect the architecture restructure (dispatch agent, action agent rename, reasoning agent repositioning)
- **Action:** Add v2.4.0 entry documenting the Feb 21‚Äì23 changes
- **Files:** `README.md`
- **Effort:** ~10 minutes

#### 3.4 Update `cross-reference analysis-report.md`
- **Problem:** Report still references `execution_agent` and `execution.md` (now renamed)
- **Action:** Update the file inventory table and finding descriptions to reflect the `action_agent` rename. Mark any resolved findings.
- **Files:** `plans/cross-reference analysis-report.md`
- **Effort:** ~10 minutes

#### 3.5 Clean up `.claude/worktrees`
- **Problem:** Stale worktree `confident-newton` is an old repo snapshot taking up space
- **Action:** Delete `.claude/worktrees/confident-newton/` directory; add `.claude/` to `.gitignore`
- **Effort:** ~2 minutes

---

### üü† Priority 4: Planning Agent Fixes (from Functionality Review ‚Äî Feb 23)

These address gaps in `planning.md` found by cross-referencing against `application.md` capabilities.

#### 4.1 Fix language detection ‚Üí transcription dependency (Issue P1)
- **Problem:** `planning.md` Dependency Rules table lists Transcription and Language Detection as independent parallel tasks. `application.md` mandates: `CAP-PRE-002 ‚Üí CAP-AUD-004 ‚Üí CAP-AUD-001` (extract audio ‚Üí detect language ‚Üí transcribe)
- **Action:** Update Dependency Rules table so Transcription depends on Language Detection AND Audio Extraction. Update Example 1 to include a language detection task before transcription.
- **Files:** `agent/operational/planning.md`
- **Effort:** ~15 minutes

#### 4.2 Complete the weight table (Issue P2)
- **Problem:** `estimated_weight` table (Step 8) missing 12 capabilities: CAP-ACQ-003/004/005, CAP-PRE-004/005, CAP-AUD-005, CAP-AUD-R001/R002/R003, CAP-SYN-003, CAP-DAT-001/002/003
- **Action:** Add weight assignments for all missing capabilities
- **Files:** `agent/operational/planning.md`
- **Effort:** ~10 minutes

#### 4.3 Complete the dependency rules table (Issue P3)
- **Problem:** Dependency Rules table (Step 5) missing 10 task types: CAP-AUD-005, CAP-SPK-002/003, CAP-AUD-R001/R002/R003, CAP-VIS-004/005/007, CAP-DAT-*
- **Action:** Add dependency rules for all missing task types, cross-referenced against `application.md` Section 6.8
- **Files:** `agent/operational/planning.md`
- **Effort:** ~20 minutes

#### 4.4 Add full workflow output to Example 2 (Issue P4)
- **Problem:** Example 2 (Multi-Objective With Deduplication) shows input and deduplication analysis but no full workflow output JSON
- **Action:** Add the complete Planning Agent output showing the 13-task DAG with execution groups, language detection sequencing, and full deduplication merge
- **Files:** `agent/operational/planning.md`
- **Effort:** ~30 minutes

---

## Estimated Total Effort

| Priority | Items | Estimated Time |
|----------|-------|---------------|
| üî¥ HIGH (runtime/validation fixes) | 6 | ~85 minutes |
| üü° MEDIUM (staleness/naming) | 7 | ~70 minutes |
| üü† Planning Agent fixes | 4 | ~75 minutes |
| üü¢ Cleanup/docs | 5 | ~35 minutes |
| **Total** | **22 items** | **~4.5 hours** |

---

## Recommended Execution Order

Items 1.1‚Äì1.3 and 2.4‚Äì2.5 all touch `memory.md`, so they should be done together in a single pass. Similarly, items 1.4‚Äì1.5 both touch `message_format.md`. Items 4.1‚Äì4.4 all touch `planning.md`.

**Suggested batches:**

1. **Batch A ‚Äî `memory.md` overhaul** (1.1 + 1.2 + 1.3 + 2.4 + 2.5): Fix ID, overhaul example, remove Reviewer Agent, fix ARL naming, fix log paths
2. **Batch B ‚Äî `message_format.md` updates** (1.4 + 1.5): Fix examples, add CAP-AUD-R
3. **Batch C ‚Äî Delete stale files** (2.1 + 3.5): Remove placeholder agents, clean worktree
4. **Batch D ‚Äî Update supporting docs** (2.2 + 2.6 + 3.3 + 3.4): Update instructions, template, README, cross-ref report
5. **Batch E ‚Äî Schema updates** (1.6 + 2.7): Bring schema up to date
6. **Batch F ‚Äî `planning.md` fixes** (4.1 + 4.2 + 4.3 + 4.4): Fix dependencies, complete tables, add example output
7. **Batch G ‚Äî Minor fixes** (2.3 + 3.1 + 3.2): CAP-AUD-R format, goal.md numbering, memory concepts

---

*End of Plan*
